---
layout: page
title: Assessor Plat Maps 
permalink: /assessor/assessorPlatMaps/
---

    <div class="row" id="platMapQuery">
    
        <div class="col-md-6 col-md-offset-3 well">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title text-center">Assessor Plat Map Search</h4>
                </div>
            </div>
            <div class="panel-body">
                <h4 class="text-center">Please enter either a Subdivision or a Location below.</h4>
                <br />
                <form id="platSearch">
                    <div class="form-group">
                        <label for="SubdivisionSearch">Subdivision</label>
                        <input class="form-control" id="SubdivisionSearch" rows="1" placeholder="Enter Subdivision (Full or Partial Name) e.g. Baker">
                    </div>
                    <div class="form-group">
                        <label for="LocationSearch">Location</label>
                        <input class="form-control" id="LocationSearch" rows="1" placeholder="Enter Location (Full or Partial Name) e.g. T39NR06W">
                    </div>
                    <button type="submit" class="btn btn-primary mb-2 center-block">Search</button>
                </form>
            </div>
        </div>
    
        <div class="modal fade" id="platSearchModal" role="dialog">
            <div class="modal-dialog" role="document">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"></h4>
                    </div>
                    <div class="modal-body" id="platSearchBody">                        
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>  
    </div>    

<script type="text/javascript">

$( "#platSearch" ).submit(function( event ) {
  
    var type = null;
    var search = null;
    var location = $("#LocationSearch").val();
    var subdivision = $("#SubdivisionSearch").val();
    if(location.length > 0){
        type = "location";
        search = location;
    }
    else if(subdivision.length > 0){
        type = "subdivision";
        search = subdivision;
    }    
    //if the search list length is longer than the document height
    //set the overflow in the modal so that it will scroll the content
    var height = $(document).height() - 200;
    $('#platSearchBody').css('overflow-y', 'auto');
    $('#platSearchBody').css('max-height', height);
    $('#platSearchModal .modal-title').html('Search Results for: ' + search);

    $.ajax({
        url: "https://gis.latah.id.us/api/getPlatMaps?type=" + type + "&search=" + search,
        type: "GET",
        async: true,
        dataType: 'json',
        success: function (data) {
            //if no results found show that
            if(data.length === 0)
            {
                $('#platSearchModal .modal-body').html("No Results Found.");                 
            }
            $.each(data, function (index) {
                var name = '<a class="list-group-item text-center list-link" ' + 'value=' + index + ' href="' +
                 'javascript:void(0)' + '"' + '>' + 
                  data[index].SubDivisionName + ' ' +
                  data[index].Location + ' ' +                                                    
                 '<' + '/a>';
                 
                $('#platSearchModal .modal-body').append(name);
                
                $('.list-group-item').on('click', function (evt) {
                    var index = $(this).attr('value');
                    downloadPlatMap(data[index].PDF);
                    evt.stopImmediatePropagation();
                })

                function downloadPlatMap(filename) {
                    var url = 'https://gis.latah.id.us/api/downloadPlatMap?fileName=' + filename

                    $.ajax({
                        url: '',
                        success: function () {
                            window.open(url);
                        },
                        async: false
                    });
                }
            });

            $('#platSearchModal').modal();            
        }
    });

    event.preventDefault();
});

$( "#SubdivisionSearch" ).focus(function() {
    $("#LocationSearch").val("");
});

$( "#LocationSearch" ).focus(function() {
    $("#SubdivisionSearch" ).val("");
});
//clear the modal body when closed
$(".modal").on("hidden.bs.modal", function(){
    $(".modal-body").html("");
});
</script>